dataset:
  name: project8_gold_price_timeseries
  version: 1.0
  domain: commodities
  owner: data-engineering
  description: >
    Minute-level gold price observations in INR,
    derived from XAU/USD and USD/INR spot prices using TwelveData.
    Data is ingested via EventBridge-driven Lambda polling,
    cleaned for schema consistency, and aggregated daily.

storage:
  raw:
    description: Immutable raw API snapshots
    s3_path: s3://the-automation-projects/Project-8/raw/
    retention_policy: append_only

  cleaned:
    description: Schema-validated and normalized records
    s3_path: s3://the-automation-projects/Project-8/cleaned/

  reports:
    description: Aggregated analytical outputs
    s3_path: s3://the-automation-projects/Project-8/reports/

schema:
  - name: asset
    type: string
    nullable: false
    description: Commodity name (gold)

  - name: timestamp_utc
    type: string
    format: iso8601
    nullable: false
    description: Observation timestamp in UTC

  - name: xau_usd
    type: float
    nullable: false
    description: Gold spot price in USD per troy ounce

  - name: usd_inr
    type: float
    nullable: false
    description: USD to INR conversion rate

  - name: price_inr_per_gram
    type: float
    nullable: false
    description: Gold price in INR per gram
    constraints:
      min: 1000
      max: 20000

  - name: price_inr_per_10g
    type: float
    nullable: false
    description: Gold price in INR per 10 grams

  - name: provider
    type: string
    nullable: false
    allowed_values:
      - twelvedata

  - name: date
    type: string
    format: yyyy-mm-dd
    nullable: false
    description: Partitioning date derived from timestamp

freshness:
  expected_interval_minutes: 1
  max_delay_minutes: 10
  description: >
    Data is expected to arrive every minute.
    Delays beyond 10 minutes indicate pipeline issues.

quality_rules:
  no_null_prices: true
  no_negative_values: true
  monotonic_timestamps: true
  expected_min_records_per_hour: 50

aggregations:
  daily_metrics:
    description: Daily gold price summary
    metrics:
      - open_price
      - close_price
      - high_price
      - low_price
      - average_price
      - percent_change
      - trend

allowed_transformations:
  - currency_conversion
  - schema_validation
  - time_partitioning
  - aggregation

consumers:
  - analytics
  - reporting
  - future_streaming_pipeline
  - future_ai_context_layer
